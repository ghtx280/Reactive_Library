let Rem_Data,Rem_Watches=[];const Rem_Store={},Rem_Store_For={},RemJs={data:e=>Rem_Data=new Proxy(e,{get:(e,t)=>Reflect.get(e,t),set(e,t,r){let l=e[t];e[t]=r,Rem_Watches.forEach(e=>{(t===e.var||!0===e.var)&&e.func(l,r)}),Rem_Update(t,l,r,t)}}),watch(e,t){Rem_Watches.push({var:e,func:t})},mounted(e){addEventListener("DOMContentLoaded",e)}};function Rem_js(e){var t,r;if(t="do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void",r=String(e),!Boolean(t.split(",").filter(e=>r.includes(e)).length))return Object.keys(Rem_Data).forEach(t=>{e.includes(t)&&!e.includes("Rem_Data."+t)&&(e=e.replaceAll(t,"Rem_Data."+t))}),Function(`return ${e}`)()}function Rem_parseAttr(e){let t=[],r=(e,r)=>t.push({prop:e,value:r}),l=e=>e.slice(0,e.indexOf(":")).trim(),i=e=>e.slice(e.indexOf(":")+1).trim(),a=t=>l(t||e).split("&").forEach(l=>{r(l.trim(),i(t||e))});return e.includes(";")?e.split(";").forEach(e=>e.includes("&")?a(e):r(l(e),i(e))):e.includes("&")?a():r(l(e),i(e)),t}function Rem_Update(e,t,r,l){Rem_Store[e]?.forEach(r=>{if(r.bind)for(let l of Rem_parseAttr(r.bind))"class"==l.prop&&(l.prop="className"),"text"==l.prop&&(l.prop="innerText"),"this"==l.prop?Rem_Data[l.value]!=r.el&&(Rem_Data[l.value]=r.el):"className"==l.prop?void 0!==t?(t="string"==typeof t?`"${t}"`:t,r.el.classList.remove(Rem_js(l.value.replaceAll(e,t))),r.el.classList.add(Rem_js(l.value))):(console.log(Rem_js(l.value)),r.el.className.includes(Rem_js(l.value))||(r.el.className+=" "+Rem_js(l.value))):"innerText"==l.prop?Rem_Data[l.value]!=r.el[l.prop]&&(Rem_Data[l.value]=r.el[l.prop]):r.el[l.prop]=Rem_js(l.value);if(r.if&&(Rem_js(r.if)?r.el.append(...r.html):r.el.innerHTML=""),r.css)for(let i of Rem_parseAttr(r.css))r.el.style[i.prop]=Rem_js(i.value);if(r.each)for(let a in r.el.innerHTML="",Rem_Data[r.each]){let n=createElement(r.html)[0]?.cloneNode(!0);if(!n)break;let s=n.innerHTML.replaceAll("$$",`${r.each}[${a}]`),o=s,m=s.match(/\{([^}]+)\}/g),c=m?.map(e=>e.slice(1,e.length-1).trim());for(let u in c)s=s.replaceAll(m[u],Rem_js(c[u]));n.removeAttribute("in"),n.innerHTML=s,r.el.append(n),setStore(n,"in",o,a)}if(r.in){let f=r.in,p=f.match(/\{([^}]+)\}/g),d=p.map(e=>e.slice(1,e.length-1).trim());for(let h in p)f=f.replaceAll(p[h],Rem_js(d[h]));r.el.innerHTML=f}})}function createElement(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes}function setStore(e,t,r,l){if("in"===t){let i=r||e.innerText,a=i.match(/\{([^}]+)\}/g)?.map(e=>e.slice(1,e.length-1).trim());for(let n in Rem_Store)if(a?.filter(e=>e.includes(n)).length){if(l){let s=Rem_Store[n].filter(e=>e.k==l);s.length?s[0].el=e:Rem_Store[n].push({el:e,[t]:i,k:l})}else Rem_Store[n].push({el:e,[t]:i})}}else for(let o in Rem_Store)if(e.getAttribute(t).includes(o)){let m={};"if"===t&&(m.html=Array.from(e.children)),"each"===t&&(m.html=e.innerHTML.trim(),e.innerHTML=""),m[t]=e.getAttribute(t),m.el=e,Rem_Store[o].push(m)}}document.addEventListener("DOMContentLoaded",()=>{if(Rem_Data)for(let e of Object.keys(Rem_Data))"function"!=typeof Rem_Data[e]&&(Rem_Store[e]=[]);let t="on,in,if,bind,css".split(",").map(e=>`[${e}]`).join();for(let r of document.querySelectorAll("[each]"))setStore(r,"each"),r.removeAttribute("each");for(let l of document.querySelectorAll("[in]"))setStore(l,"in"),l.removeAttribute("in");for(let i of document.querySelectorAll(t)){if(i.hasAttribute("if")&&(setStore(i,"if"),i.removeAttribute("if")),i.hasAttribute("css")&&(setStore(i,"css"),i.removeAttribute("css")),i.hasAttribute("bind")){let a="change",n=i.getAttribute("bind");(n.includes("value")||n.includes("checked"))&&Rem_parseAttr(n).forEach(e=>{"value"==e.prop&&(a="input"),i.addEventListener(a,()=>{Rem_Data[e.value]=i[e.prop]})}),setStore(i,"bind"),i.removeAttribute("bind")}i.hasAttribute("on")&&(Rem_parseAttr(i.getAttribute("on")).forEach(e=>{i.addEventListener(e.prop,function(){Rem_js(e.value)})}),i.removeAttribute("on"))}for(let s in Rem_Store)Rem_Update(s)});
